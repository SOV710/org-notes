#+title: Real Analysis Crash Course: From Sets to Harmonic Functions
#+author: SOV710
#+date: <2025-12-26 Fri>
#+startup: showall
#+options: toc:3 num:nil

* 实数系统: 一切的起点

** 实数的构造

实数集 $\mathbb{R}$ 可以通过 *Dedekind 分割* 或 *Cauchy 序列等价类* 构造出来。

*** Dedekind 分割构造

一个 Dedekind 分割是有理数集 $\mathbb{Q}$ 的一个分划 $(A, B)$, 满足:

1. $A \cup B = \mathbb{Q}$, $A \cap B = \emptyset$, $A, B \neq \emptyset$
2. 若 $a \in A$, $b \in B$, 则 $a < b$
3. $A$ 无最大元

每个这样的分割对应一个实数。

*关键洞察*: 有理数的 "缝隙" 被实数填上了。例如 $\sqrt{2}$ 对应的分割:
- $A = \{q \in \mathbb{Q} : q < 0 \text{ 或 } q^2 < 2\}$
- $B = \{q \in \mathbb{Q} : q > 0 \text{ 且 } q^2 > 2\}$

*** Cauchy 序列构造

定义 Cauchy 序列的等价关系, 商集 $\mathbb{Q}^{\mathbb{N}} / \sim$ 就是 $\mathbb{R}$。

** 实数的完备性公理

以下命题在 $\mathbb{R}$ 中 *等价* (但在 $\mathbb{Q}$ 中都 *不* 成立):

*** 1. 最小上界公理 (Least Upper Bound Property)

任何非空有上界的集合必有 *最小上界* (supremum)。

#+begin_quote
$\forall S \subseteq \mathbb{R}$, $S \neq \emptyset$, 若 $\exists M : \forall x \in S, x \leq M$, 则 $\exists \sup S \in \mathbb{R}$
#+end_quote

*注意*: $\sup S$ 可能不在 $S$ 中！例如 $S = (0, 1)$, $\sup S = 1 \notin S$。

*** 2. 单调有界序列收敛定理

单调递增且有上界的序列必收敛。

*** 3. 区间套定理 (Nested Interval Theorem)

设 $I_n = [a_n, b_n]$ 是闭区间序列, 满足:
- $I_{n+1} \subseteq I_n$ (嵌套)
- $\lim_{n \to \infty} (b_n - a_n) = 0$ (长度趋于 0)

则 $\bigcap_{n=1}^{\infty} I_n$ 恰好包含 *一个点*。

*反例* (开区间不行): $\bigcap_{n=1}^{\infty} (0, \frac{1}{n}) = \emptyset$

*** 4. Bolzano-Weierstrass 定理

$\mathbb{R}$ 中任何有界无穷序列必有收敛子序列。

*** 5. Cauchy 收敛准则

序列 $\{x_n\}$ 收敛 $\Leftrightarrow$ $\{x_n\}$ 是 Cauchy 序列。

#+begin_quote
$\forall \epsilon > 0, \exists N : \forall m, n > N, |x_m - x_n| < \epsilon$
#+end_quote

*为什么有理数不完备?* 考虑 $x_n = \sum_{k=0}^{n} \frac{1}{k!}$ (趋向 $e$), 这在 $\mathbb{Q}$ 中是 Cauchy 序列但不收敛到有理数。

** 实数的阿基米德性

$\forall x, y \in \mathbb{R}$, $x > 0$, $\exists n \in \mathbb{N} : nx > y$。

*通俗说*: 再小的正数, 只要叠加足够多次, 都能超过任意大的数。

*推论*: $\mathbb{Q}$ 在 $\mathbb{R}$ 中稠密, 即任意两个实数之间必有有理数。

* 度量空间: 推广距离的概念

** 度量 (Metric) 的定义

集合 $X$ 上的 *度量* 是函数 $d: X \times X \to [0, \infty)$, 满足:

1. *正定性*: $d(x, y) = 0 \Leftrightarrow x = y$
2. *对称性*: $d(x, y) = d(y, x)$
3. *三角不等式*: $d(x, z) \leq d(x, y) + d(y, z)$

$(X, d)$ 称为 *度量空间*。

** 常见度量

*** Euclidean 度量

$\mathbb{R}^n$ 上: $d(x, y) = \sqrt{\sum_{i=1}^{n} (x_i - y_i)^2}$

*** 离散度量

$d(x, y) = \begin{cases} 0 & x = y \\ 1 & x \neq y \end{cases}$

*性质*: 任何集合都可以装备离散度量, 此时每个点都是 *孤立点*。

*** $L^p$ 度量

$d_p(x, y) = \left( \sum_{i=1}^{n} |x_i - y_i|^p \right)^{1/p}$, $p \geq 1$

- $p = 1$: Manhattan 距离 (出租车距离)
- $p = 2$: Euclidean 距离
- $p = \infty$: $d_\infty(x, y) = \max_i |x_i - y_i|$ (Chebyshev 距离)

** 度量诱导的拓扑

*** 开球 (Open Ball)

$B(x, r) = \{y \in X : d(x, y) < r\}$

*** 开集

$U \subseteq X$ 是 *开集* $\Leftrightarrow$ $\forall x \in U, \exists r > 0 : B(x, r) \subseteq U$

*直观*: 开集中的每个点都被一个 "安全半径" 包围, 不会 "碰到边界"。

*** 闭集

$F$ 是 *闭集* $\Leftrightarrow$ $F^c$ 是开集。

*等价定义*: $F$ 包含它的所有极限点 (即 $F$ 的任何收敛序列的极限都在 $F$ 中)。

*** 重要性质

1. $\emptyset$ 和 $X$ 既是开集又是闭集
2. 任意多个开集的并是开集
3. 有限多个开集的交是开集
4. 任意多个闭集的交是闭集
5. 有限多个闭集的并是闭集

*陷阱*: 无穷多个开集的交 *不一定* 是开集！

#+begin_example
$\bigcap_{n=1}^{\infty} (-\frac{1}{n}, \frac{1}{n}) = \{0\}$ (闭集)
#+end_example

** 内点、边界点、聚点

设 $A \subseteq X$:

*** 内点 (Interior Point)

$x$ 是 $A$ 的内点 $\Leftrightarrow$ $\exists r > 0 : B(x, r) \subseteq A$

$A$ 的所有内点构成 $A$ 的 *内部* $\text{int}(A)$ 或 $A^\circ$。

*** 边界点 (Boundary Point)

$x$ 是 $A$ 的边界点 $\Leftrightarrow$ 任何 $B(x, r)$ 既包含 $A$ 中的点也包含 $A^c$ 中的点。

边界记为 $\partial A$。

*** 聚点 (Limit Point / Accumulation Point)

$x$ 是 $A$ 的聚点 $\Leftrightarrow$ $\forall r > 0, B(x, r) \cap (A \setminus \{x\}) \neq \emptyset$

*注意*: 聚点 $x$ 可以不在 $A$ 中！例如 $A = (0, 1)$, $0$ 和 $1$ 都是聚点但不在 $A$ 中。

*** 孤立点 (Isolated Point)

$x \in A$ 是孤立点 $\Leftrightarrow$ $\exists r > 0 : B(x, r) \cap A = \{x\}$

*** 闭包 (Closure)

$\overline{A} = A \cup \{\text{所有聚点}\}$ 是包含 $A$ 的最小闭集。

*性质*: $A$ 是闭集 $\Leftrightarrow$ $A = \overline{A}$

** 完备度量空间

度量空间 $(X, d)$ 是 *完备的* $\Leftrightarrow$ 任何 Cauchy 序列都在 $X$ 中收敛。

*例子*:
- $\mathbb{R}$ 是完备的 (实数的核心性质)
- $\mathbb{Q}$ *不* 完备
- $C[0, 1]$ (连续函数, 配上 sup 范数) 是完备的
- $(0, 1)$ *不* 完备 (序列 $\{1/n\}$ 是 Cauchy 但收敛到 0, 不在 $(0, 1)$ 中)

** 紧致性 (Compactness)

*** 定义 (开覆盖定义)

$K \subseteq X$ 是 *紧致的* $\Leftrightarrow$ $K$ 的任何开覆盖都有有限子覆盖。

#+begin_quote
若 $K \subseteq \bigcup_{\alpha} U_\alpha$ (每个 $U_\alpha$ 是开集), 则 $\exists$ 有限个 $\alpha_1, \ldots, \alpha_n$ 使得 $K \subseteq \bigcup_{i=1}^{n} U_{\alpha_i}$
#+end_quote

*** Heine-Borel 定理

在 $\mathbb{R}^n$ 中, $K$ 是紧致的 $\Leftrightarrow$ $K$ 是 *闭集* 且 *有界*。

*记忆法*: 紧致 = 闭 + 有界 (仅在 $\mathbb{R}^n$ 中!)

*陷阱*: 这在一般度量空间中 *不* 成立！例如无穷维 Hilbert 空间的闭单位球 *不* 紧致。

*** 序列紧致

$K$ 是 *序列紧致的* $\Leftrightarrow$ $K$ 中任何序列都有收敛子序列 (且极限在 $K$ 中)。

*定理*: 在度量空间中, 紧致 $\Leftrightarrow$ 序列紧致。

*** 紧致集的性质

1. 紧致集的闭子集是紧致的
2. 紧致集的连续像是紧致的
3. 紧致集上的连续函数达到最大值和最小值 (*极值定理*)
4. 紧致集上的连续函数是一致连续的

* 连续性和一致连续性

** 连续性的定义

设 $f: X \to Y$ 是度量空间之间的函数。

*** $\epsilon$-$\delta$ 定义

$f$ 在 $x_0$ 处连续 $\Leftrightarrow$

#+begin_quote
$\forall \epsilon > 0, \exists \delta > 0 : d_X(x, x_0) < \delta \Rightarrow d_Y(f(x), f(x_0)) < \epsilon$
#+end_quote

*** 序列定义

$f$ 在 $x_0$ 处连续 $\Leftrightarrow$ 对任何 $x_n \to x_0$, 都有 $f(x_n) \to f(x_0)$。

*** 拓扑定义

$f$ 连续 $\Leftrightarrow$ 任何开集的原像是开集。

#+begin_quote
$\forall U \subseteq Y$ 开, $f^{-1}(U) \subseteq X$ 开
#+end_quote

*这是最强的定义*, 自动蕴含所有点处连续。

** 一致连续性

$f: X \to Y$ 是 *一致连续的* $\Leftrightarrow$

#+begin_quote
$\forall \epsilon > 0, \exists \delta > 0 : \forall x, y \in X, d_X(x, y) < \delta \Rightarrow d_Y(f(x), f(y)) < \epsilon$
#+end_quote

*关键区别*: $\delta$ *不依赖于* $x$ 的选择！

*** 对比

| 连续性          | $\delta$ 的选择           | 性质                   |
|-------------+-------------------------+----------------------|
| 点连续          | $\delta = \delta(\epsilon, x_0)$ | 局部性质               |
| 一致连续        | $\delta = \delta(\epsilon)$     | 全局性质               |

*** 例子

*一致连续*: $f(x) = x$ 在 $\mathbb{R}$ 上

*连续但不一致连续*: $f(x) = x^2$ 在 $\mathbb{R}$ 上

#+begin_quote
取 $x_n = n$, $y_n = n + \frac{1}{n}$, 则 $|x_n - y_n| = \frac{1}{n} \to 0$, 但 $|f(x_n) - f(y_n)| = 2 + \frac{1}{n^2} \to 2$, 无法对所有 $\epsilon < 2$ 找到统一的 $\delta$。
#+end_quote

*** 一致连续性定理

若 $f: K \to Y$ 连续且 $K$ 紧致, 则 $f$ 一致连续。

*推论*: $[a, b]$ 上的连续函数自动一致连续。

* Lebesgue 测度: 比长度更强的概念

** 为什么需要 Lebesgue 测度?

Riemann 积分的局限:

1. $f(x) = \begin{cases} 1 & x \in \mathbb{Q} \\ 0 & x \notin \mathbb{Q} \end{cases}$ (Dirichlet 函数) 在 $[0, 1]$ 上 *不 Riemann 可积*
2. 逐点收敛的函数列的极限可能不可积
3. 无法处理 "几乎处处" 的性质

Lebesgue 测度解决了这些问题。

** 外测度 (Outer Measure)

*** 定义

$E \subseteq \mathbb{R}$ 的 *外测度* $m^*(E)$ 定义为:

#+begin_quote
$m^*(E) = \inf \left\{ \sum_{n=1}^{\infty} |I_n| : E \subseteq \bigcup_{n=1}^{\infty} I_n \right\}$
#+end_quote

其中 $I_n$ 是开区间, $|I_n|$ 是区间长度。

*直观*: 用可数多个开区间覆盖 $E$, 长度和的下确界。

*** 性质

1. *单调性*: $A \subseteq B \Rightarrow m^*(A) \leq m^*(B)$
2. *可数次可加性*: $m^*\left(\bigcup_{n=1}^{\infty} E_n\right) \leq \sum_{n=1}^{\infty} m^*(E_n)$
3. *平移不变性*: $m^*(E + x) = m^*(E)$

*注意*: 外测度 *不是* 真正的测度, 因为不满足可加性！

** Lebesgue 可测集

$E$ 是 *Lebesgue 可测的* $\Leftrightarrow$ 对任何 $A \subseteq \mathbb{R}$, 满足:

#+begin_quote
$m^*(A) = m^*(A \cap E) + m^*(A \cap E^c)$
#+end_quote

*Carathéodory 条件*: 可测集能 "干净地切割" 任何集合。

*** 可测集的性质

1. 所有开集和闭集都可测
2. 可测集的补集可测
3. 可数个可测集的并和交都可测
4. 可测集构成 *$\sigma$-代数*

*** Lebesgue 测度

对可测集 $E$, 定义 $m(E) = m^*(E)$ 为 *Lebesgue 测度*。

*性质*:
- *可数可加性*: 若 $E_n$ 两两不交, $m\left(\bigcup_{n=1}^{\infty} E_n\right) = \sum_{n=1}^{\infty} m(E_n)$
- *区间的测度* = 长度: $m([a, b]) = b - a$

** 零测集 (Null Set)

$E$ 是 *零测集* $\Leftrightarrow$ $m(E) = 0$。

*** 例子

1. *任何可数集*: $m(\mathbb{Q}) = 0$
2. *Cantor 集*: $m(C) = 0$ (尽管 $C$ 不可数!)
3. 任何有限个点

*** 几乎处处 (Almost Everywhere, a.e.)

性质 $P(x)$ *几乎处处成立* $\Leftrightarrow$ $\{x : P(x) \text{ 不成立}\}$ 是零测集。

*记号*: $f = g$ a.e. 表示 $f(x) = g(x)$ 对几乎所有 $x$ 成立。

*重要性*: Lebesgue 积分忽略零测集上的行为！

** 不可测集的存在性

*Vitali 集* 是不可测的, 证明依赖选择公理。

构造思路:
1. 在 $[0, 1]$ 上定义等价关系: $x \sim y \Leftrightarrow x - y \in \mathbb{Q}$
2. 从每个等价类中选一个代表, 构成 $V$ (Vitali 集)
3. 若 $V$ 可测, 通过平移不变性和可数可加性得出矛盾

*哲学意义*: 不是所有 $\mathbb{R}$ 的子集都 "有大小"！

* Lebesgue 可测函数

** 定义

$f: E \to \mathbb{R}$ ($E$ 可测) 是 *可测的* $\Leftrightarrow$ 对任何 $\alpha \in \mathbb{R}$,

#+begin_quote
$\{x \in E : f(x) > \alpha\}$ 是可测集
#+end_quote

*** 等价条件

以下条件等价:
1. $\{x : f(x) > \alpha\}$ 可测 ($\forall \alpha$)
2. $\{x : f(x) \geq \alpha\}$ 可测
3. $\{x : f(x) < \alpha\}$ 可测
4. $\{x : f(x) \leq \alpha\}$ 可测

*记忆法*: 只要一个方向的 "切割" 是可测的, 其他都可测。

** 可测函数的性质

1. *连续函数* 必可测
2. *Riemann 可积函数* 必可测
3. 可测函数的 *四则运算* 仍可测 (定义域适当)
4. 可测函数的 *逐点极限* 仍可测
5. 可测函数的 *上确界和下确界* 仍可测

*对比*: Riemann 可积函数的逐点极限 *不一定* Riemann 可积！

** 简单函数 (Simple Function)

$\phi$ 是 *简单函数* $\Leftrightarrow$ $\phi$ 只取有限多个值, 且每个值对应的集合可测。

#+begin_quote
$\phi = \sum_{i=1}^{n} a_i \chi_{E_i}$, 其中 $\chi_{E_i}$ 是特征函数
#+end_quote

*** 简单函数逼近定理

任何非负可测函数 $f$ 都可以被简单函数序列 $\{\phi_n\}$ *逐点单调递增* 地逼近:

#+begin_quote
$\phi_n \uparrow f$ (即 $\phi_n(x) \leq \phi_{n+1}(x)$ 且 $\lim_{n \to \infty} \phi_n(x) = f(x)$)
#+end_quote

*这是定义 Lebesgue 积分的基础！*

** Egorov 定理

设 $f_n \to f$ a.e. 在有限测度集 $E$ 上, 则 $\forall \epsilon > 0$, $\exists$ 可测集 $A \subseteq E$ 使得:
- $m(E \setminus A) < \epsilon$
- $f_n \to f$ 在 $A$ 上 *一致收敛*

*直观*: 几乎处处收敛 "几乎就是" 一致收敛, 只需扔掉一个很小的集合。

** Lusin 定理

设 $f$ 在有限测度集 $E$ 上可测, 则 $\forall \epsilon > 0$, $\exists$ 闭集 $F \subseteq E$ 使得:
- $m(E \setminus F) < \epsilon$
- $f|_F$ 是 *连续的*

*直观*: 可测函数 "几乎就是" 连续函数！

* Lebesgue 积分

** 定义: 从简单函数到一般函数

*** 简单函数的积分

对简单函数 $\phi = \sum_{i=1}^{n} a_i \chi_{E_i}$ ($E_i$ 不交), 定义:

#+begin_quote
$\int_E \phi \, dm = \sum_{i=1}^{n} a_i m(E_i)$
#+end_quote

*约定*: $0 \cdot \infty = 0$ (如果 $a_i = 0$ 即使 $m(E_i) = \infty$)

*** 非负可测函数的积分

对非负可测函数 $f$, 定义:

#+begin_quote
$\int_E f \, dm = \sup \left\{ \int_E \phi \, dm : 0 \leq \phi \leq f, \phi \text{ 简单} \right\}$
#+end_quote

*可能取值* $\infty$。

*** 一般可测函数的积分

定义 $f^+ = \max(f, 0)$, $f^- = \max(-f, 0)$, 则 $f = f^+ - f^-$。

若 $\int_E f^+ \, dm < \infty$ 或 $\int_E f^- \, dm < \infty$, 定义:

#+begin_quote
$\int_E f \, dm = \int_E f^+ \, dm - \int_E f^- \, dm$
#+end_quote

$f$ *Lebesgue 可积* $\Leftrightarrow$ $\int_E |f| \, dm < \infty$。

** Lebesgue 积分 vs. Riemann 积分

*** 相同点

若 $f$ 在 $[a, b]$ 上 Riemann 可积, 则 Lebesgue 可积, 且积分值相同:

#+begin_quote
$\int_a^b f(x) \, dx = \int_{[a, b]} f \, dm$
#+end_quote

*** 不同点

| 性质           | Riemann 积分       | Lebesgue 积分         |
|--------------+------------------+---------------------|
| Dirichlet 函数 | 不可积            | 可积 (= 0, 因为 $\mathbb{Q}$ 零测) |
| 极限交换       | 需要一致收敛       | 只需控制收敛           |
| 可积函数空间    | 不完备            | *完备* (这是 $L^1$ 空间)   |

*** Lebesgue 积分的哲学

Riemann 积分: "纵向切割", 把 $y$ 轴分段, 求和 $f(x) \Delta x$

Lebesgue 积分: "横向切割", 把 $x$ 轴按 $f$ 的值分层, 求和 $y \cdot m(\{x : f(x) \approx y\})$

*比喻*:
- Riemann: 按硬币的位置堆叠
- Lebesgue: 先分类 (面值), 再数每类的总质量

** 三大收敛定理

*** 1. 单调收敛定理 (Monotone Convergence Theorem, MCT)

设 $0 \leq f_1 \leq f_2 \leq \cdots$ (逐点单调递增), $f_n \to f$ a.e., 则:

#+begin_quote
$\lim_{n \to \infty} \int_E f_n \, dm = \int_E f \, dm$
#+end_quote

*无需有界假设*, 结果可能是 $\infty$。

*推论* (Beppo Levi): $\sum_{n=1}^{\infty} \int_E f_n \, dm = \int_E \sum_{n=1}^{\infty} f_n \, dm$ (若 $f_n \geq 0$)

*** 2. Fatou 引理

设 $f_n \geq 0$ a.e., 则:

#+begin_quote
$\int_E \liminf_{n \to \infty} f_n \, dm \leq \liminf_{n \to \infty} \int_E f_n \, dm$
#+end_quote

*注意*: 是 *$\leq$*, 不是等号！不等式可以严格。

*反例*: $f_n = n \chi_{[0, 1/n]}$, $\int f_n = 1$ 但 $f_n \to 0$ a.e.

*** 3. 控制收敛定理 (Dominated Convergence Theorem, DCT)

设 $f_n \to f$ a.e., 且 $\exists$ 可积函数 $g$ 使得 $|f_n| \leq g$ a.e., 则:

#+begin_quote
$\lim_{n \to \infty} \int_E f_n \, dm = \int_E f \, dm$
#+end_quote

*这是最常用的定理！* 允许交换极限和积分。

*例子*: 证明 $\frac{d}{dx} \int_a^x f(t) \, dt = f(x)$:

#+begin_src latex
\frac{d}{dx} \int_a^x f(t) \, dt = \lim_{h \to 0} \frac{1}{h} \int_x^{x+h} f(t) \, dt
#+end_src

取 $f_h(t) = \frac{1}{h} \chi_{[x, x+h]}(t)$, 由 DCT 可得结果。

** Fubini 定理 (积分顺序交换)

设 $f$ 在 $\mathbb{R}^m \times \mathbb{R}^n$ 上可测。

*** Tonelli 定理 (非负函数)

若 $f \geq 0$, 则:

#+begin_quote
$\int_{\mathbb{R}^{m+n}} f \, d(m \times n) = \int_{\mathbb{R}^m} \left( \int_{\mathbb{R}^n} f(x, y) \, dn(y) \right) dm(x)$
#+end_quote

积分顺序可交换 (结果可能是 $\infty$)。

*** Fubini 定理 (可积函数)

若 $\int_{\mathbb{R}^{m+n}} |f| \, d(m \times n) < \infty$, 则:

1. 对几乎所有 $x$, $y \mapsto f(x, y)$ 可积
2. 积分顺序可交换

#+begin_quote
$\int_{\mathbb{R}^{m+n}} f = \int_{\mathbb{R}^m} \int_{\mathbb{R}^n} f(x, y) \, dn(y) \, dm(x) = \int_{\mathbb{R}^n} \int_{\mathbb{R}^m} f(x, y) \, dm(x) \, dn(y)$
#+end_quote

*陷阱*: 若 $f$ 不可积, 顺序可能不可交换！

*反例*: $f(x, y) = \frac{xy}{(x^2 + y^2)^2}$ 在 $[0, 1] \times [0, 1]$ 上, 两个方向积分结果不同。

* 微分理论

** 有界变差函数 (Bounded Variation)

$f: [a, b] \to \mathbb{R}$ 的 *全变差* 定义为:

#+begin_quote
$V_a^b(f) = \sup \sum_{i=1}^{n} |f(x_i) - f(x_{i-1})|$
#+end_quote

其中 sup 取遍所有分划 $a = x_0 < x_1 < \cdots < x_n = b$。

若 $V_a^b(f) < \infty$, 称 $f$ 为 *BV 函数*。

*** 性质

1. 单调函数必为 BV
2. BV 函数可写成两个单调递增函数之差
3. BV 函数几乎处处可微

** 绝对连续函数 (Absolutely Continuous)

$f: [a, b] \to \mathbb{R}$ 是 *绝对连续的* $\Leftrightarrow$

#+begin_quote
$\forall \epsilon > 0, \exists \delta > 0 : \forall$ 有限个不交区间 $(a_i, b_i)$, 若 $\sum_i (b_i - a_i) < \delta$, 则 $\sum_i |f(b_i) - f(a_i)| < \epsilon$
#+end_quote

*直观*: "长度小的区间, 函数值变化也小" (对所有区间 *一致* 成立)。

*** 层次关系

#+begin_quote
绝对连续 $\Rightarrow$ 一致连续 $\Rightarrow$ 连续
绝对连续 $\Rightarrow$ BV
#+end_quote

*反例*: Cantor 函数 (魔鬼阶梯) 是连续、BV、单调, 但 *不* 绝对连续。

** 微积分基本定理 (Lebesgue 版本)

*** 第一部分

若 $f$ 在 $[a, b]$ 上 Lebesgue 可积, 定义:

#+begin_quote
$F(x) = \int_a^x f(t) \, dt$
#+end_quote

则:
1. $F$ 是 *绝对连续的*
2. $F'(x) = f(x)$ *a.e.*

*** 第二部分

若 $f$ 在 $[a, b]$ 上 *绝对连续*, 则:
1. $f'$ 几乎处处存在且 Lebesgue 可积
2. $f(x) - f(a) = \int_a^x f'(t) \, dt$

*陷阱*: 若 $f$ 只是 BV (不绝对连续), 则积分可能 *严格小于* $f(x) - f(a)$！

*Cantor 函数例*: $F'(x) = 0$ a.e., 但 $F(1) - F(0) = 1 \neq 0$。

* $L^p$ 空间

** 定义

设 $1 \leq p < \infty$, 定义:

#+begin_quote
$L^p(E) = \{f: E \to \mathbb{R} \text{ 可测} : \int_E |f|^p \, dm < \infty\} / \sim$
#+end_quote

其中 $f \sim g \Leftrightarrow f = g$ a.e. (等价类)。

定义 *$L^p$ 范数*:

#+begin_quote
$\|f\|_p = \left( \int_E |f|^p \, dm \right)^{1/p}$
#+end_quote

*** $L^\infty$ 空间

#+begin_quote
$L^\infty(E) = \{f \text{ 可测} : \exists M : |f| \leq M \text{ a.e.}\}$
#+end_quote

*本性上确界* (essential supremum):

#+begin_quote
$\|f\|_\infty = \inf \{M : |f| \leq M \text{ a.e.}\} = \text{ess sup}_{x \in E} |f(x)|$
#+end_quote

** $L^p$ 的基本不等式

*** Hölder 不等式

设 $1 \leq p, q \leq \infty$, $\frac{1}{p} + \frac{1}{q} = 1$ (称为 *共轭指数*), 则:

#+begin_quote
$\int_E |fg| \, dm \leq \|f\|_p \|g\|_q$
#+end_quote

*特例* ($p = q = 2$): Cauchy-Schwarz 不等式

#+begin_quote
$\int_E |fg| \, dm \leq \left( \int_E |f|^2 \, dm \right)^{1/2} \left( \int_E |g|^2 \, dm \right)^{1/2}$
#+end_quote

*** Minkowski 不等式 (三角不等式)

#+begin_quote
$\|f + g\|_p \leq \|f\|_p + \|g\|_p$
#+end_quote

*这证明了* $\|\cdot\|_p$ *是真正的范数*。

** $L^p$ 的完备性

*** Riesz-Fischer 定理

$(L^p(E), \|\cdot\|_p)$ 是 *完备的 Banach 空间*。

*证明思路*: 若 $\{f_n\}$ 是 Cauchy 序列, 取子序列使得 $\|f_{n_{k+1}} - f_{n_k}\|_p < 2^{-k}$, 由控制收敛定理可证收敛。

*** $L^2$ 的特殊性

$L^2$ 是 *Hilbert 空间*, 内积为:

#+begin_quote
$\langle f, g \rangle = \int_E f \overline{g} \, dm$
#+end_quote

- 正交性: $\langle f, g \rangle = 0 \Rightarrow f \perp g$
- 正交投影定理
- 傅里叶级数展开

** $L^p$ 空间的包含关系

若 $m(E) < \infty$, 则:

#+begin_quote
$1 \leq p < q \leq \infty \Rightarrow L^q(E) \subseteq L^p(E)$
#+end_quote

*直观*: 在有限测度集上, "更可积的" 函数也 "较弱可积"。

*反例* ($m(E) = \infty$): $f(x) = \frac{1}{x}$ 在 $(1, \infty)$ 上, $f \in L^1$ 但 $f \notin L^2$。

** 稠密性和对偶性

*** 连续函数的稠密性

设 $E$ 是 $\mathbb{R}^n$ 中的可测集, $1 \leq p < \infty$:

1. $C_c(E)$ (紧支集连续函数) 在 $L^p(E)$ 中 *稠密*
2. 简单函数在 $L^p(E)$ 中稠密

*不成立于* $L^\infty$！

*** 对偶空间

设 $\frac{1}{p} + \frac{1}{q} = 1$, 则 $(L^p)^* \cong L^q$ ($1 < p < \infty$)。

*例外*:
- $(L^1)^* \cong L^\infty$
- $(L^\infty)^* \not\cong L^1$ (更大, 包含有符号测度)

* 微分和积分的对偶

** Radon-Nikodym 定理

设 $\mu, \nu$ 是 $\sigma$-有限测度空间 $(X, \mathcal{F})$ 上的测度。若 $\nu$ *绝对连续* 于 $\mu$ (记为 $\nu \ll \mu$), 即:

#+begin_quote
$\mu(E) = 0 \Rightarrow \nu(E) = 0$
#+end_quote

则存在非负可测函数 $f$ (称为 *Radon-Nikodym 导数*), 使得:

#+begin_quote
$\nu(E) = \int_E f \, d\mu$, $\forall E \in \mathcal{F}$
#+end_quote

*记号*: $f = \frac{d\nu}{d\mu}$

*** 直观理解

$f$ 是 $\nu$ 相对于 $\mu$ 的 "密度函数" 或 "导数"。

*类比*: 连续情况下, $\nu(E) = \int_E f(x) \, dx$ 中, $f$ 是概率密度函数。

** Lebesgue 分解定理

任何两个 $\sigma$-有限测度 $\mu, \nu$ 可以唯一分解为:

#+begin_quote
$\nu = \nu_a + \nu_s$
#+end_quote

其中:
- $\nu_a \ll \mu$ (绝对连续部分)
- $\nu_s \perp \mu$ (奇异部分, 即 $\exists E : \mu(E) = 0, \nu_s(E^c) = 0$)

*例子*: Cantor 测度是关于 Lebesgue 测度的奇异测度。

* 调和函数: 实分析的美妙应用

** 定义

$u: \Omega \to \mathbb{R}$ ($\Omega \subseteq \mathbb{R}^n$ 开集) 是 *调和的* $\Leftrightarrow$ $\Delta u = 0$, 其中:

#+begin_quote
$\Delta u = \sum_{i=1}^{n} \frac{\partial^2 u}{\partial x_i^2}$ (Laplace 算子)
#+end_quote

*物理意义*:
- 静电势
- 稳态温度分布
- 理想流体势函数

** 平均值性质 (Mean Value Property)

$u$ 调和 $\Leftrightarrow$ 对任何 $x \in \Omega$ 和足够小的 $r > 0$:

#+begin_quote
$u(x) = \frac{1}{|\partial B(x, r)|} \int_{\partial B(x, r)} u \, dS$ (球面平均)
#+end_quote

或等价地:

#+begin_quote
$u(x) = \frac{1}{|B(x, r)|} \int_{B(x, r)} u \, dy$ (球体平均)
#+end_quote

*直观*: 调和函数在任何点的值等于其 "周围" 的平均值。

** 最大值原理 (Maximum Principle)

若 $u$ 在有界开集 $\Omega$ 上调和, 在 $\overline{\Omega}$ 上连续, 则:

#+begin_quote
$\max_{\overline{\Omega}} u = \max_{\partial \Omega} u$
#+end_quote

*推论*:
1. 若 $u$ 在 $\Omega$ 内部达到最大值, 则 $u$ 是 *常函数*
2. *唯一性*: Dirichlet 问题的解 (若存在) 是唯一的

*** Dirichlet 问题

给定 $\Omega$ 和边界值 $g: \partial \Omega \to \mathbb{R}$, 求 $u$ 使得:

#+begin_quote
$\begin{cases} \Delta u = 0 & \text{在 } \Omega \\ u = g & \text{在 } \partial \Omega \end{cases}$
#+end_quote

** 调和函数的光滑性

*** 无穷可微性

*定理*: 调和函数自动 $C^\infty$ (无穷次可微)。

*证明思路*: 通过卷积平滑化核 (mollifier) 和平均值性质。

*** 解析性

在 $\mathbb{R}^2$ 中, 调和函数与 *全纯函数* 紧密相关:

- 若 $f = u + iv$ 全纯, 则 $u, v$ 都调和
- 若 $u$ 调和, 存在 "调和共轭" $v$ 使得 $f = u + iv$ 全纯

** Poisson 积分公式

设 $u$ 在单位球 $B(0, 1) \subseteq \mathbb{R}^n$ 上调和, 在 $\overline{B(0, 1)}$ 上连续, 则:

#+begin_quote
$u(x) = \int_{\partial B(0, 1)} u(y) P(x, y) \, dS(y)$
#+end_quote

其中 $P(x, y) = \frac{1 - |x|^2}{|x - y|^n \omega_n}$ 是 *Poisson 核*, $\omega_n$ 是单位球面积。

*意义*: 内部的值完全由边界值决定。

** 次调和函数 (Subharmonic)

$u$ 是 *次调和的* $\Leftrightarrow$ $\Delta u \geq 0$ (在分布意义下)。

*等价条件*:

#+begin_quote
$u(x) \leq \frac{1}{|B(x, r)|} \int_{B(x, r)} u \, dy$ (平均值不等式)
#+end_quote

*** 最大值原理的推广

若 $u$ 次调和, 则 $\max_{\overline{\Omega}} u = \max_{\partial \Omega} u$。

*例子*: $u = |f|^2$ ($f$ 全纯) 是次调和的, 这导致 *最大模原理*。

** Harnack 不等式

设 $u > 0$ 在连通开集 $\Omega$ 上调和, $K \subset \Omega$ 紧致, 则 $\exists C = C(K, \Omega)$ 使得:

#+begin_quote
$\sup_K u \leq C \inf_K u$
#+end_quote

*直观*: 正调和函数在紧集上的振荡是 *受控的*。

*推论*: 调和函数序列的 *局部一致收敛* 等价于 *逐点收敛*。

** Liouville 定理

*** 有界情形

若 $u$ 在 $\mathbb{R}^n$ 上调和且有界, 则 $u$ 是 *常函数*。

*证明思路*: 用平均值性质和 Poisson 积分, 令 $r \to \infty$。

*** 增长条件

若 $u$ 在 $\mathbb{R}^n$ 上调和且满足 $|u(x)| \leq C(1 + |x|^k)$, 则 $u$ 是次数 $\leq k$ 的多项式。

** 与 Laplace 方程的能量极小化

调和函数是 *Dirichlet 能量* 的临界点:

#+begin_quote
$E(u) = \int_\Omega |\nabla u|^2 \, dx$
#+end_quote

*变分刻画*: $u$ 调和 $\Leftrightarrow$ $\frac{d}{dt}\Big|_{t=0} E(u + t\phi) = 0$, $\forall \phi \in C_c^\infty(\Omega)$。

* 总结: 实分析的核心脉络

#+begin_quote
*实数完备性* → *度量空间和拓扑* → *Lebesgue 测度* → *可测函数* → *Lebesgue 积分* → *收敛定理* → *微分和 BV/AC 函数* → *$L^p$ 空间* → *调和函数*
#+end_quote

** 关键概念对比

| 概念        | Riemann / 经典       | Lebesgue / 现代  |
|-------------+----------------------+------------------|
| 可积性       | 连续 (或几乎连续)       | 可测即可          |
| 收敛定理     | 需要一致收敛           | 控制收敛定理 / MCT |
| 完备性       | 不完备                | $L^p$ 完备       |
| 微积分基本定理 | 需要连续导数           | 绝对连续即可       |
| 函数空间     | $C[a, b]$ (sup 范数) | $L^p$ (积分范数)  |

** 学习建议

1. *完备性* 是一切的基础, 理解 Cauchy 序列和收敛的关系
2. *零测集* 和 "几乎处处" 是 Lebesgue 理论的核心, 习惯这种思维
3. *三大收敛定理* (MCT, Fatou, DCT) 是工具箱, 要烂熟于心
4. *$L^p$ 空间* 是泛函分析的入口, 理解范数和完备性
5. *调和函数* 连接实分析和复分析, 展示了理论的美妙应用

** 常见陷阱

- *不要* 认为连续函数一定 Riemann 可积 (需要有界闭区间)
- *不要* 认为可测函数一定连续 (Dirichlet 函数可测但处处不连续)
- *不要* 混淆 "几乎处处" 和 "处处" (零测集上的行为无关紧要)
- *不要* 忘记 Fubini 定理的可积性条件 (否则积分顺序可能不可交换)
- *不要* 认为 BV 函数一定绝对连续 (Cantor 函数是反例)

*最后的忠告*: 实分析是现代数学的语言, 掌握它才能真正理解概率论、偏微分方程、泛函分析和几何测度论。多做习题, 构造反例, 培养直觉！
